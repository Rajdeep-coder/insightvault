<div id="<%= dom_id(message) %>" class="mb-2 flex <%= message.role == 'user' ? 'justify-end' : 'justify-start' %>">
  <% if message.role == "assistant" && message.status == "typing" %>
    <div class="inline-flex items-center space-x-2 text-gray-500 text-sm animate-pulse">
      <span class="inline-block bg-gray-300 rounded-full h-2 w-2"></span>
      <span class="inline-block bg-gray-300 rounded-full h-2 w-2"></span>
      <span class="inline-block bg-gray-300 rounded-full h-2 w-2"></span>
      <span>Assistant is typing...</span>
    </div>
  <% else %>
    <div class="<%= message.role == 'user' ? 'bg-blue-600 text-white ml-auto' : 'bg-gray-200 text-gray-800 mr-auto' %> px-4 py-2 rounded-xl max-w-[80%] shadow-sm">
      <%= simple_format(message.content) %>
    </div>
  <% end %>
</div>
